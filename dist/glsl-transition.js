!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.GlslTransition=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return e(c?c:b)},j,j.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";function c(a,b,c,d,e,f,g){this._gl=a,this._program=b,this._location=c,this._dimension=d,this._name=e,this._constFunc=f,this._relink=g}function d(a,b,d,e,f,g,h){for(var i=["gl","v"],j=[],k=0;e>k;++k)i.push("x"+k),j.push("x"+k);i.push(["if(x0.length===undefined){return gl.vertexAttrib",e,"f(v,",j.join(","),")}else{return gl.vertexAttrib",e,"fv(v,x0)}"].join(""));var l=Function.apply(void 0,i),m=new c(a,b,d,e,g,l,h);Object.defineProperty(f,g,{set:function(b){return a.disableVertexAttribArray(m._location),l(a,m._location,b),b},get:function(){return m},enumerable:!0})}function e(a,b,c,e){for(var f={},g=0,h=c.length;h>g;++g){var i=c[g],j=i.name,k=i.type,l=a.getAttribLocation(b,j);switch(k){case"bool":case"int":case"float":d(a,b,l,1,f,j,e);break;default:if(!(k.indexOf("vec")>=0))throw new Error("Unknown data type for attribute "+j+": "+k);var m=k.charCodeAt(k.length-1)-48;if(2>m||m>4)throw new Error("Invalid data type for attribute "+j+": "+k);d(a,b,l,m,f,j,e)}}return f}b.exports=e;var f=c.prototype;f.pointer=function(a,b,c,d){var e=this._gl;e.vertexAttribPointer(this._location,this._dimension,a||e.FLOAT,b?e.TRUE:e.FALSE,c||0,d||0),this._gl.enableVertexAttribArray(this._location)},Object.defineProperty(f,"location",{get:function(){return this._location},set:function(a){a!==this._location&&(this._location=a,this._gl.bindAttribLocation(this._program,a,this._name),this._gl.linkProgram(this._program),this._relink())}})},{}],2:[function(a,b){"use strict";function c(a){var b=new Function("y","return function(){return y}");return b(a)}function d(a,b,d,g){function h(c){var d=new Function("gl","prog","locations","return function(){return gl.getUniform(prog,locations["+c+"])}");return d(a,b,g)}function i(a,b,c){switch(c){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+b+"],obj"+a+")";case"float":return"gl.uniform1f(locations["+b+"],obj"+a+")";default:var d=c.indexOf("vec");if(!(d>=0&&1>=d&&c.length===4+d)){if(0===c.indexOf("mat")&&4===c.length){var e=c.charCodeAt(c.length-1)-48;if(2>e||e>4)throw new Error("Invalid uniform dimension type for matrix "+name+": "+c);return"gl.uniformMatrix"+e+"fv(locations["+b+"],false,obj"+a+")"}throw new Error("Unknown uniform data type for "+name+": "+c)}var e=c.charCodeAt(c.length-1)-48;if(2>e||e>4)throw new Error("Invalid data type");switch(c.charAt(0)){case"b":case"i":return"gl.uniform"+e+"iv(locations["+b+"],obj"+a+")";case"v":return"gl.uniform"+e+"fv(locations["+b+"],obj"+a+")";default:throw new Error("Unrecognized data type for vector "+name+": "+c)}}}function j(a,b){if("object"!=typeof b)return[[a,b]];var c=[];for(var d in b){var e=b[d],f=a;f+=parseInt(d)+""===d?"["+d+"]":"."+d,"object"==typeof e?c.push.apply(c,j(f,e)):c.push([f,e])}return c}function k(c){for(var e=["return function updateProperty(obj){"],f=j("",c),h=0;h<f.length;++h){var k=f[h],l=k[0],m=k[1];g[m]&&e.push(i(l,m,d[m].type))}e.push("return obj}");var n=new Function("gl","prog","locations",e.join("\n"));return n(a,b,g)}function l(a){switch(a){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var b=a.indexOf("vec");if(b>=0&&1>=b&&a.length===4+b){var c=a.charCodeAt(a.length-1)-48;if(2>c||c>4)throw new Error("Invalid data type");return"b"===a.charAt(0)?e(c,!1):e(c)}if(0===a.indexOf("mat")&&4===a.length){var c=a.charCodeAt(a.length-1)-48;if(2>c||c>4)throw new Error("Invalid uniform dimension type for matrix "+name+": "+a);return e([c,c])}throw new Error("Unknown uniform data type for "+name+": "+a)}}function m(a,b,e){if("object"==typeof e){var f=n(e);Object.defineProperty(a,b,{get:c(f),set:k(e),enumerable:!0,configurable:!1})}else g[e]?Object.defineProperty(a,b,{get:h(e),set:k(e),enumerable:!0,configurable:!1}):a[b]=l(d[e].type)}function n(a){var b;if(Array.isArray(a)){b=new Array(a.length);for(var c=0;c<a.length;++c)m(b,c,a[c])}else{b={};for(var d in a)m(b,d,a[d])}return b}var o=f(d,!0);return{get:c(n(o)),set:k(o),enumerable:!0,configurable:!0}}var e=a("dup"),f=a("./reflect.js");b.exports=d},{"./reflect.js":3,dup:4}],3:[function(a,b){"use strict";function c(a,b){for(var c={},d=0;d<a.length;++d)for(var e=a[d].name,f=e.split("."),g=c,h=0;h<f.length;++h){var i=f[h].split("[");if(i.length>1){i[0]in g||(g[i[0]]=[]),g=g[i[0]];for(var j=1;j<i.length;++j){var k=parseInt(i[j]);j<i.length-1||h<f.length-1?(k in g||(g[k]=j<i.length-1?[]:{}),g=g[k]):g[k]=b?d:a[d].type}}else h<f.length-1?(i[0]in g||(g[i[0]]={}),g=g[i[0]]):g[i[0]]=b?d:a[d].type}return c}b.exports=c},{}],4:[function(a,b){"use strict";function c(a,b,d){var e=0|a[d];if(0>=e)return[];var f,g=new Array(e);if(d===a.length-1)for(f=0;e>f;++f)g[f]=b;else for(f=0;e>f;++f)g[f]=c(a,b,d+1);return g}function d(a,b){var c,d;for(c=new Array(a),d=0;a>d;++d)c[d]=b;return c}function e(a,b){switch("undefined"==typeof b&&(b=0),typeof a){case"number":if(a>0)return d(0|a,b);break;case"object":if("number"==typeof a.length)return c(a,b,0)}return[]}b.exports=e},{}],5:[function(a,b){"use strict";function c(a,b,c,d){this.gl=a,this.handle=b,this.attributes=null,this.uniforms=null,this.types=null,this.vertexShader=c,this.fragmentShader=d}function d(a,b,c,d){for(var e=0;e<d.length;++e)c[e]=a.getUniformLocation(b,d[e].name)}function e(a,b,d,e,f){var g=a.createShader(a.VERTEX_SHADER);if(a.shaderSource(g,b),a.compileShader(g),!a.getShaderParameter(g,a.COMPILE_STATUS))throw new Error("Error compiling vertex shader: "+a.getShaderInfoLog(g));var h=a.createShader(a.FRAGMENT_SHADER);if(a.shaderSource(h,d),a.compileShader(h),!a.getShaderParameter(h,a.COMPILE_STATUS))throw new Error("Error compiling fragment shader: "+a.getShaderInfoLog(h));var i=a.createProgram();if(a.attachShader(i,h),a.attachShader(i,g),a.linkProgram(i),!a.getProgramParameter(i,a.LINK_STATUS))throw new Error("Error linking shader program: "+a.getProgramInfoLog(i));var j=new c(a,i,g,h);return j.updateExports(e,f),j}var f=a("./lib/create-uniforms.js"),g=a("./lib/create-attributes.js"),h=a("./lib/reflect.js");c.prototype.bind=function(){this.gl.useProgram(this.handle)},c.prototype.dispose=function(){var a=this.gl;a.deleteShader(this.vertexShader),a.deleteShader(this.fragmentShader),a.deleteProgram(this.handle)},c.prototype.updateExports=function(a,b){var c=new Array(a.length),e=this.handle,i=this.gl,j=d.bind(void 0,i,e,c,a);j(),this.types={uniforms:h(a),attributes:h(b)},this.attributes=g(i,e,b,j),Object.defineProperty(this,"uniforms",f(i,e,a,c))},b.exports=e},{"./lib/create-attributes.js":1,"./lib/create-uniforms.js":2,"./lib/reflect.js":3}],6:[function(a,b){"use strict";function c(a){for(var b,c,d=[],c=0;c<a.children.length;++c){var e=a.children[c];if("placeholder"!==e.type)if("keyword"===e.type){if("uniform"===e.token.data||"attribute"===e.token.data)continue;b=e.token.data}else if("decllist"===e.type)for(var f=0;f<e.children.length;++f){var g=e.children[f];"ident"===g.type&&d.push(g.token.data)}}return{type:b,vars:d}}function d(a){var b={},d={},h=g();return h.pipe(e()).pipe(f()).on("data",function(a){if("decl"===a.type&&"keyword"===a.token.type)if("uniform"===a.token.data)for(var e=c(a),f=0;f<e.vars.length;++f)b[e.vars[f]]=e.type;else if("attribute"===a.token.data)for(var e=c(a),f=0;f<e.vars.length;++f)d[e.vars[f]]=e.type}),h.write(a),{uniforms:b,attributes:d}}var e=a("glsl-tokenizer"),f=a("glsl-parser"),g=a("through");b.exports=d},{"glsl-parser":7,"glsl-tokenizer":12,through:16}],7:[function(a,b){b.exports=a("./lib/index")},{"./lib/index":9}],8:[function(a,b){function c(){return this}function d(a,b){var c=r[a];return b=b||0,c?b>c.lbp&&(c.lbp=b):(c=Object.create(q),c.id=a,c.lbp=b,r[a]=c),c}function e(a){var b,c=n;for(k(),b=c.nud();a<n.lbp;)c=n,k(),b=c.led(b);return b}function f(a,b,c){var f=d(a,b);f.led=c||function(a){return this.children=[a,e(b)],this.type="binary",this}}function g(a,b,c){var f=d(a,b);return f.led=c||function(a){return this.children=[a,e(b-1)],this.type="binary",this},f}function h(a,b){var c=d(a);return c.nud=b||function(){return this.children=[e(70)],this.type="unary",this},c}function i(a){var b=d(a,150);b.led=function(a){return this.children=[a],this.type="suffix",this}}function j(a){return g(a,10,function(a){return this.children=[a,e(9)],this.assignment=!0,this.type="assign",this})}function k(a){var b,d,e,f;if(a&&n.data!==a)return m.unexpected("expected `"+a+"`, got `"+n.data+"`");if(p>=o.length)return void(n=r["(end)"]);if(b=o[p++],d=b.data,e=b.type,"ident"===e)f=m.scope.find(d)||m.create_node(),e=f.type;else if("builtin"===e)f=r["(builtin)"];else if("keyword"===e)f=r["(keyword)"];else if("operator"===e){if(f=r[d],!f)return m.unexpected("unknown operator `"+d+"`")}else{if("float"!==e&&"integer"!==e)return m.unexpected("unexpected token.");e="literal",f=r["(literal)"]}return f&&(f.nud||(f.nud=c),f.children||(f.children=[])),f=Object.create(f),f.token=b,f.type=e,f.data||(f.data=d),n=f}function l(a){return function(){return m.unexpected(a)}}var m,n,o,p,q={nud:function(){return this.children&&this.children.length?this:l("unexpected")()},led:l("missing operator")},r={};d("(ident)").nud=c,d("(keyword)").nud=c,d("(builtin)").nud=c,d("(literal)").nud=c,d("(end)"),d(":"),d(";"),d(","),d(")"),d("]"),d("}"),g("&&",30),g("||",30),f("|",43),f("^",44),f("&",45),f("==",46),f("!=",46),f("<",47),f("<=",47),f(">",47),f(">=",47),f(">>",48),f("<<",48),f("+",50),f("-",50),f("*",60),f("/",60),f("%",60),f("?",20,function(a){return this.children=[a,e(0),(k(":"),e(0))],this.type="ternary",this}),f(".",80,function(a){return n.type="literal",m.fake(n),this.children=[a,n],k(),this}),f("[",80,function(a){return this.children=[a,e(0)],this.type="binary",k("]"),this}),f("(",80,function(a){if(this.children=[a],this.type="call",")"!==n.data)for(;;){if(this.children.push(e(0)),","!==n.data)break;k(",")}return k(")"),this}),h("-"),h("+"),h("!"),h("~"),h("defined"),h("(",function(){return this.type="group",this.children=[e(0)],k(")"),this}),h("++"),h("--"),i("++"),i("--"),j("="),j("+="),j("-="),j("*="),j("/="),j("%="),j("&="),j("|="),j("^="),j(">>="),j("<<="),b.exports=function(a,b){function c(a){m.unshift(a,!1);for(var b=0,d=a.children.length;d>b;++b)c(a.children[b]);m.shift()}m=a,o=b,p=0;var d;if(o.length){if(k(),d=e(0),d.parent=m[0],c(d),p<o.length)throw new Error("did not use all tokens");d.parent.children=[d]}}},{}],9:[function(a,b){function c(){function a(a){if("whitespace"===a.type||"line-comment"===a.type||"block-comment"===a.type)return void Yb.push(a);for(Xb.push(a),Fb=Fb||Xb[0],Fb&&Yb.length&&(Fb.preceding=Fb.preceding||[],Fb.preceding=Fb.preceding.concat(Yb),Yb=[]);c();)switch(Wb[0].mode){case o:Y();break;case p:N();break;case t:Z();break;case u:$();break;case y:cb();break;case q:ub(!0,!0);break;case z:vb();break;case n:bb();break;case C:ab();break;case D:_();break;case r:Cb();break;case s:Db();break;case v:xb();break;case w:Ab();break;case I:Bb();break;case E:zb();break;case x:yb();break;case K:wb()}}function b(b){return arguments.length&&a(b),Wb.length>1?void jb("unexpected EOF"):void Ub.emit("end")}function c(){return Zb||!Wb.length?!1:(Fb=Xb[0])&&!Ub.paused}function m(a){Wb.unshift(a),Wb.shift()}function A(a,b){a.parent=Wb[0];var c=[].unshift.call(this,a);if(b=void 0===b?!0:b,l){for(var d="",e=0,f=this.length-1;f>e;++e)d+=" |";console.log(d,"\\"+a.type,a.token.data)}return b&&Gb!==a&&Gb.children.push(a),Gb=a,c}function B(){var a=[].shift.call(this),b=Vb[this.length],c=!1;if(l){for(var d="",e=0,f=this.length;f>e;++e)d+=" |";console.log(d,"/"+a.type)}return Vb.length?"function"==typeof Vb[0]?c=Vb[0](a):void 0!==b&&(c=b.test?b.test(a.type):b===a.type):c=!0,c&&Ub.emit("data",a),Gb=a.parent,a}function N(){function a(){if(Fb.data===Wb[0].expecting)return Wb.scope.exit(),Wb.shift();switch(Fb.type){case"preprocessor":return Wb.fake(eb()),void Xb.shift();default:return void Wb.unshift(Ib())}}return mb(function(){return Wb.scope.enter(),k},a)()}function Y(){if(Wb[0].brace)return"}"!==Fb.data?jb("expected `}`, got "+Fb.data):(Wb[0].brace=!1,Xb.shift(),Wb.shift());switch(Fb.type){case"eof":return Wb.shift();case"keyword":switch(Fb.data){case"for":return Wb.unshift(Ob());case"if":return Wb.unshift(Pb());case"while":return Wb.unshift(Qb());case"do":return Wb.unshift(Sb());case"break":return Wb.fake(d(F,Fb)),Xb.shift();case"continue":return Wb.fake(d(G,Fb)),Xb.shift();case"discard":return Wb.fake(d(H,Fb)),Xb.shift();case"return":return Wb.unshift(Rb());case"precision":return Wb.unshift(Kb())}return Wb.unshift(fb(S));case"ident":var a;if(a=Wb.scope.find(Fb.data))return Wb.unshift("struct"===a.parent.type?fb(S):hb(";"));case"operator":if("{"===Fb.data){Wb[0].brace=!0;var b=Hb();return b.expecting="}",Xb.shift(),Wb.unshift(b)}if(";"===Fb.data)return Xb.shift(),Wb.shift();default:return Wb.unshift(hb(";"))}}function Z(){function a(){return"invariant"===Fb.data?o.flags&O?(Wb.unshift(ib()),k):jb("`invariant` is not allowed here"):(Wb.fake(d(J,{data:"",position:Fb.position})),k)}function b(){return e(Fb)?o.flags&P?(Wb.unshift(ib()),k):jb("storage is not allowed here"):(Wb.fake(d(J,{data:"",position:Fb.position})),k)}function c(){return f(Fb)?o.flags&Q?jb("parameter is not allowed here"):(Wb.unshift(ib()),k):(Wb.fake(d(J,{data:"",position:Fb.position})),k)}function h(){return g(Fb)?(Wb.unshift(ib()),k):(Wb.fake(d(J,{data:"",position:Fb.position})),k)}function i(){if("struct"===Fb.data)return o.flags&R?(Wb.unshift(gb()),k):jb("cannot nest structs");if("keyword"===Fb.type)return Wb.unshift(ib()),k;var a=Wb.scope.find(Fb.data);return a?(Wb.fake(Object.create(a)),Xb.shift(),k):jb("expected user defined type, struct or keyword, got "+Fb.data)}function j(){return","!==Fb.data||o.flags&M?"["===Fb.data?void Wb.unshift(Tb()):")"===Fb.data?Wb.shift():";"===Fb.data?o.stage+3:"ident"!==Fb.type&&"builtin"!==Fb.type?jb("expected identifier, got "+Fb.data):(o.collected_name=Xb.shift(),k):Wb.shift()}function l(){return"("===Fb.data?(Xb.unshift(o.collected_name),delete o.collected_name,Wb.unshift(Mb()),o.stage+2):k}function m(){return Xb.unshift(o.collected_name),delete o.collected_name,Wb.unshift(Jb()),k}function n(){return Wb.shift()}var o=Wb[0];return mb(a,b,c,h,i,j,l,m,n)()}function $(){if("ident"===Fb.type){var a=Fb.data;return Wb.unshift(Lb()),void Wb.scope.define(a)}if("operator"===Fb.type){if(","===Fb.data)return Wb[1].flags&M?Xb.shift():Wb.shift();if("="===Fb.data)return Wb[1].flags&L?(Xb.shift(),void Wb.unshift(hb(",",";"))):jb("`=` is not allowed here.");if("["===Fb.data)return void Wb.unshift(Tb())}return Wb.shift()}function _(){return"keyword"===Fb.type?(Wb[0].type="keyword",void(Wb[0].mode=C)):"ident"===Fb.type?(Wb[0].type="ident",void(Wb[0].mode=n)):jb("expected keyword or user-defined name, got "+Fb.data)}function ab(){return"keyword"!==Fb.type?jb("expected keyword, got "+Fb.data):(Wb.shift(),Xb.shift())}function bb(){return"ident"!==Fb.type?jb("expected user-defined name, got "+Fb.data):(Wb[0].data=Fb.data,Wb.shift(),Xb.shift())}function cb(){function a(a){return i(Wb,a),Wb.shift()}var b=Wb[0].expecting;if(Wb[0].tokens=Wb[0].tokens||[],void 0===Wb[0].parenlevel&&(Wb[0].parenlevel=0,Wb[0].bracelevel=0),Wb[0].parenlevel<1&&b.indexOf(Fb.data)>-1)return a(Wb[0].tokens);switch("("===Fb.data?++Wb[0].parenlevel:")"===Fb.data&&--Wb[0].parenlevel,Fb.data){case"{":++Wb[0].bracelevel;break;case"}":--Wb[0].bracelevel;break;case"(":++Wb[0].parenlevel;break;case")":--Wb[0].parenlevel}return Wb[0].parenlevel<0?jb("unexpected `)`"):Wb[0].bracelevel<0?jb("unexpected `}`"):void Wb[0].tokens.push(Xb.shift())}function db(a){return function(){return d(a,Fb)}}function eb(){return d(X[Fb.type],Fb,Gb)}function fb(a){var b=d(t,Fb,Gb);return b.flags=a,b}function gb(a,b){var c=d(q,Fb,Gb);return c.allow_assign=void 0===a?!0:a,c.allow_comma=void 0===b?!0:b,c}function hb(){var a=d(y,Fb,Gb);return a.expecting=[].slice.call(arguments),a}function ib(a){var b=Fb;return a&&(b={type:"(implied)",data:"(default)",position:b.position}),d(C,b,Gb)}function jb(a){Zb=!0,Ub.emit("error",new Error((a||"unexpected "+Wb)+" at line "+Wb[0].token.line))}function kb(a,b){return lb(a,Fb.type)&&lb(b,Fb.data)}function lb(a,b){switch(typeof a){case"string":return b!==a&&jb("expected `"+a+"`, got "+b+"\n"+Fb.data),!Zb;case"object":return a&&-1===a.indexOf(b)&&jb("expected one of `"+a.join("`, `")+"`, got "+b),!Zb}return!0}function mb(){var a,b,c=[].slice.call(arguments);return function(){var d=Wb[0];return d.stage||(d.stage=0),(a=c[d.stage])?(b=a(),b===k?++d.stage:void(void 0!==b&&(d.stage=b))):jb("parser in undefined state!")}}function nb(a,b){return b=b||"operator",function(){if(kb(b,a)){var c=Xb.shift(),d=Wb[0].children,e=d[d.length-1];return e&&e.token&&c.preceding&&(e.token.succeeding=e.token.succeeding||[],e.token.succeeding=e.token.succeeding.concat(c.preceding)),k}}}function ob(a){return function(){return Wb.unshift(hb(a)),k}}function pb(a){return a?function(){var a=Fb.data;return kb("ident")&&(Wb.unshift(Lb()),Wb.scope.define(a),k)}:function(){if(kb("ident")){var a=Object.create(Wb.scope.find(Fb.data));return a.token=Fb,Xb.shift(),k}}}function qb(){return function(){var a=Hb();return a.expecting="}",Wb.unshift(a),k}}function rb(a){return function(){var b=Wb[0].stage;return"{"!==Fb.data?(Wb.unshift(Ib()),b+a):(Xb.shift(),k)}}function sb(){return function(){return Wb.shift(),Wb.shift()}}function tb(){ub=mb(nb("struct","keyword"),function(){return"{"===Fb.data?(Wb.fake(d(n,{data:"",position:Fb.position,type:"ident"})),k):pb(!0)()},function(){return Wb.scope.enter(),k},nb("{"),function(){return"preprocessor"===Fb.type?(Wb.fake(eb()),void Xb.shift()):"}"===Fb.data?(Wb.scope.exit(),Xb.shift(),Wb.shift()):";"===Fb.data?void Xb.shift():void Wb.unshift(fb(U))}),vb=mb(function(){return Xb.shift(),k},function(){return kb("keyword",["lowp","mediump","highp"])&&(Wb.unshift(ib()),k)},function(){return Wb.unshift(ib()),k},function(){return Wb.shift()}),wb=mb(nb("["),ob("]"),nb("]"),function(){return Wb.shift()}),xb=mb(nb("for","keyword"),nb("("),function(){var a;if("ident"===Fb.type){if((a=Wb.scope.find(Fb.data))||(a=Wb.create_node()),"struct"===a.parent.type)return Wb.unshift(fb(S)),k}else if("builtin"===Fb.type||"keyword"===Fb.type)return Wb.unshift(fb(S)),k;return ob(";")()},nb(";"),ob(";"),nb(";"),ob(")"),nb(")"),rb(3),qb(),nb("}"),sb()),yb=mb(nb("if","keyword"),nb("("),ob(")"),nb(")"),rb(3),qb(),nb("}"),function(){return"else"===Fb.data?(Xb.shift(),Wb.unshift(Ib()),k):sb()()},sb()),zb=mb(nb("return","keyword"),function(){return";"===Fb.data?k:(Wb.unshift(hb(";")),k)},function(){Xb.shift(),sb()()}),Ab=mb(nb("while","keyword"),nb("("),ob(")"),nb(")"),rb(3),qb(),nb("}"),sb()),Bb=mb(nb("do","keyword"),rb(3),qb(),nb("}"),nb("while","keyword"),nb("("),ob(")"),nb(")"),sb()),Cb=mb(function(){for(var a=1,b=Wb.length;b>a;++a)if(Wb[a].mode===r)return jb("function definition is not allowed within another function");return k},function(){if(kb("ident")){var a=Fb.data,b=Wb.scope.find(a);return Wb.unshift(Lb()),Wb.scope.define(a),Wb.scope.enter(b?b.scope:null),k}},nb("("),function(){return Wb.unshift(Nb()),k},nb(")"),function(){return";"===Fb.data?(Wb.scope.exit(),Wb.shift(),Wb.shift()):k},nb("{"),qb(),nb("}"),function(){return Wb.scope.exit(),k},function(){return Wb.shift(),Wb.shift(),Wb.shift()}),Db=mb(function(){return"void"===Fb.data?(Wb.fake(ib()),Xb.shift(),k):")"===Fb.data?void Wb.shift():"struct"===Fb.data?(Wb.unshift(gb(V,W)),k):(Wb.unshift(fb(T)),k)},function(){return","===Fb.data?(Xb.shift(),0):")"===Fb.data?void Wb.shift():void jb("expected one of `,` or `)`, got "+Fb.data)})}var ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb=db(p),Ib=db(o),Jb=db(u),Kb=db(z),Lb=db(n),Mb=(db(D),db(r)),Nb=db(s),Ob=db(v),Pb=db(x),Qb=db(w),Rb=db(E),Sb=db(I),Tb=db(K),Ub=h(a,b),Vb=arguments.length?[].slice.call(arguments):[],Wb=[],Xb=[],Yb=[],Zb=!1;return Wb.shift=B,Wb.unshift=A,Wb.fake=m,Wb.unexpected=jb,Wb.scope=new j(Wb),Wb.create_node=function(){var a=d(n,Fb);return a.parent=Ub.program,a},tb(),Gb=Hb(),Gb.expecting="(eof)",Gb.mode=p,Gb.token={type:"(program)",data:"(program)"},Eb=Gb,Ub.program=Eb,Ub.scope=function(a){return 1===arguments.length&&(Wb.scope=a),Wb.scope},Wb.unshift(Gb),Ub}function d(a,b){return{mode:a,token:b,children:[],type:Y[a],id:(4294967295*Math.random()).toString(16)}}function e(a){return"const"===a.data||"attribute"===a.data||"uniform"===a.data||"varying"===a.data}function f(a){return"in"===a.data||"inout"===a.data||"out"===a.data}function g(a){return"highp"===a.data||"mediump"===a.data||"lowp"===a.data}b.exports=c;var h=a("through"),i=a("./expr"),j=a("./scope"),k=new Object,l=!1,m=0,n=m++,o=m++,p=m++,q=m++,r=m++,s=m++,t=m++,u=m++,v=m++,w=m++,x=m++,y=m++,z=m++,A=m++,B=m++,C=m++,D=m++,E=m++,F=m++,G=m++,H=m++,I=m++,J=m++,K=m++,L=1,M=2,N=4,O=8,P=16,Q=32,R=64,S=255,T=S&~(L|M|Q|O|N),U=S&~(L|O|P|R),V=!1,W=!1,X={"block-comment":A,"line-comment":A,preprocessor:B},Y=m=["ident","stmt","stmtlist","struct","function","functionargs","decl","decllist","forloop","whileloop","if","expr","precision","comment","preprocessor","keyword","keyword_or_ident","return","break","continue","discard","do-while","placeholder","quantifier"]},{"./expr":8,"./scope":10,through:11}],10:[function(a,b){function c(a){return this.constructor!==c?new c(a):(this.state=a,this.scopes=[],void(this.current=null))}b.exports=c;var d=c,e=d.prototype;e.enter=function(a){this.scopes.push(this.current=this.state[0].scope=a||{})},e.exit=function(){this.scopes.pop(),this.current=this.scopes[this.scopes.length-1]},e.define=function(a){this.current[a]=this.state[0]},e.find=function(a){for(var b=this.scopes.length-1;b>-1;--b)if(this.scopes[b].hasOwnProperty(a))return this.scopes[b][a];return null}},{}],11:[function(a,b,c){(function(d){function e(a,b){function c(){for(;j.length&&!i.paused;){var a=j.shift();if(null===a)return i.emit("end");i.emit("data",a)}}function e(){i.writable=!1,b.call(i),i.readable||i.destroy()}a=a||function(a){this.emit("data",a)},b=b||function(){this.emit("end")};var g=!1,h=!1,i=new f,j=[];return i.buffer=j,i.readable=i.writable=!0,i.paused=!1,i.write=function(b){return a.call(this,b),!i.paused},i.queue=function(a){j.push(a),c()},i.on("end",function(){i.readable=!1,i.writable||d.nextTick(function(){i.destroy()})}),i.end=function(a){g||(g=!0,arguments.length&&i.write(a),e())},i.destroy=function(){h||(h=!0,g=!0,j.length=0,i.writable=i.readable=!1,i.emit("close"))},i.pause=function(){i.paused||(i.paused=!0,i.emit("pause"))},i.resume=function(){i.paused&&(i.paused=!1),c(),i.paused||i.emit("drain")},i}var f=a("stream");c=b.exports=e,e.through=e}).call(this,a("JkpR2F"))},{JkpR2F:23,stream:25}],12:[function(a,b){function c(){function a(a){a.length&&K.queue({type:v[N],data:a,position:Q,line:P})}function b(a){for(L=0,T+=a.toString(),J=T.length;H=T[L],J>L;)switch(N){case j:L=A();break;case k:L=z();break;case l:L=y();break;case m:L=B();break;case n:L=E();break;case u:L=D();break;case o:L=F();break;case i:L=G();break;case s:L=x();break;case h:L=w()}M+=L,T=T.slice(L)}function c(){O.length&&a(O.join("")),N=t,a("(eof)"),K.queue(null)}function w(){return O=O.length?[]:O,"/"===I&&"*"===H?(Q=M+L-1,N=j,I=H,L+1):"/"===I&&"/"===H?(Q=M+L-1,N=k,I=H,L+1):"#"===H?(N=l,Q=M+L,L):/\s/.test(H)?(N=s,Q=M+L,L):(R=/\d/.test(H),S=/[^\w_]/.test(H),Q=M+L,N=R?n:S?m:i,L)}function x(){return"\n"===H&&++P,/[^\s]/g.test(H)?(a(O.join("")),N=h,L):(O.push(H),I=H,L+1)}function y(){return"\n"===H&&++P,"\n"===H&&"\\"!==I?(a(O.join("")),N=h,L):(O.push(H),I=H,L+1)}function z(){return y()}function A(){return"/"===H&&"*"===I?(O.push(H),a(O.join("")),N=h,L+1):("\n"===H&&++P,O.push(H),I=H,L+1)}function B(){if("."===I&&/\d/.test(H))return N=o,L;if("/"===I&&"*"===H)return N=j,L;if("/"===I&&"/"===H)return N=k,L;if("."===H&&O.length){for(;C(O););return N=o,L}if(";"===H||")"===H||"("===H){if(O.length)for(;C(O););return a(H),N=h,L+1}var b=2===O.length&&"="!==H;if(/[\w_\d\s]/.test(H)||b){for(;C(O););return N=h,L}return O.push(H),I=H,L+1}function C(b){for(var c,d=0;;){c=f.indexOf(b.slice(0,b.length+d).join(""));{if(-1!==c)return a(f[c]),Q+=f[c].length,O=O.slice(f[c].length),O.length;d-=1}}}function D(){return/[^a-fA-F0-9]/.test(H)?(a(O.join("")),N=h,L):(O.push(H),I=H,L+1)}function E(){return"."===H?(O.push(H),N=o,I=H,L+1):/[eE]/.test(H)?(O.push(H),N=o,I=H,L+1):"x"===H&&1===O.length&&"0"===O[0]?(N=u,O.push(H),I=H,L+1):/[^\d]/.test(H)?(a(O.join("")),N=h,L):(O.push(H),I=H,L+1)}function F(){return"f"===H&&(O.push(H),I=H,L+=1),/[eE]/.test(H)?(O.push(H),I=H,L+1):/[^\d]/.test(H)?(a(O.join("")),N=h,L):(O.push(H),I=H,L+1)}function G(){if(/[^\d\w_]/.test(H)){var b=O.join("");return N=e.indexOf(b)>-1?r:g.indexOf(b)>-1?q:p,a(O.join("")),N=h,L}return O.push(H),I=H,L+1}var H,I,J,K=d(b,c),L=0,M=0,N=h,O=[],P=1,Q=0,R=!1,S=!1,T="";return K}b.exports=c;var d=a("through"),e=a("./lib/literals"),f=a("./lib/operators"),g=a("./lib/builtins"),h=999,i=9999,j=0,k=1,l=2,m=3,n=4,o=5,p=6,q=7,r=8,s=9,t=10,u=11,v=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":13,"./lib/literals":14,"./lib/operators":15,through:16}],13:[function(a,b){b.exports=["gl_Position","gl_PointSize","gl_ClipVertex","gl_FragCoord","gl_FrontFacing","gl_FragColor","gl_FragData","gl_FragDepth","gl_Color","gl_SecondaryColor","gl_Normal","gl_Vertex","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_FogCoord","gl_MaxLights","gl_MaxClipPlanes","gl_MaxTextureUnits","gl_MaxTextureCoords","gl_MaxVertexAttribs","gl_MaxVertexUniformComponents","gl_MaxVaryingFloats","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformComponents","gl_MaxDrawBuffers","gl_ModelViewMatrix","gl_ProjectionMatrix","gl_ModelViewProjectionMatrix","gl_TextureMatrix","gl_NormalMatrix","gl_ModelViewMatrixInverse","gl_ProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverse","gl_TextureMatrixInverse","gl_ModelViewMatrixTranspose","gl_ProjectionMatrixTranspose","gl_ModelViewProjectionMatrixTranspose","gl_TextureMatrixTranspose","gl_ModelViewMatrixInverseTranspose","gl_ProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixInverseTranspose","gl_TextureMatrixInverseTranspose","gl_NormalScale","gl_DepthRangeParameters","gl_DepthRange","gl_ClipPlane","gl_PointParameters","gl_Point","gl_MaterialParameters","gl_FrontMaterial","gl_BackMaterial","gl_LightSourceParameters","gl_LightSource","gl_LightModelParameters","gl_LightModel","gl_LightModelProducts","gl_FrontLightModelProduct","gl_BackLightModelProduct","gl_LightProducts","gl_FrontLightProduct","gl_BackLightProduct","gl_FogParameters","gl_Fog","gl_TextureEnvColor","gl_EyePlaneS","gl_EyePlaneT","gl_EyePlaneR","gl_EyePlaneQ","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_ObjectPlaneR","gl_ObjectPlaneQ","gl_FrontColor","gl_BackColor","gl_FrontSecondaryColor","gl_BackSecondaryColor","gl_TexCoord","gl_FogFragCoord","gl_Color","gl_SecondaryColor","gl_TexCoord","gl_FogFragCoord","gl_PointCoord","radians","degrees","sin","cos","tan","asin","acos","atan","pow","exp","log","exp2","log2","sqrt","inversesqrt","abs","sign","floor","ceil","fract","mod","min","max","clamp","mix","step","smoothstep","length","distance","dot","cross","normalize","faceforward","reflect","refract","matrixCompMult","lessThan","lessThanEqual","greaterThan","greaterThanEqual","equal","notEqual","any","all","not","texture2D","texture2DProj","texture2DLod","texture2DProjLod","textureCube","textureCubeLod"]},{}],14:[function(a,b){b.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],15:[function(a,b){b.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],16:[function(a,b,c){(function(d){function e(a,b,c){function e(){for(;j.length&&!l.paused;){var a=j.shift();if(null===a)return l.emit("end");l.emit("data",a)}}function g(){l.writable=!1,b.call(l),!l.readable&&l.autoDestroy&&l.destroy()}a=a||function(a){this.queue(a)},b=b||function(){this.queue(null)};var h=!1,i=!1,j=[],k=!1,l=new f;return l.readable=l.writable=!0,l.paused=!1,l.autoDestroy=!(c&&c.autoDestroy===!1),l.write=function(b){return a.call(this,b),!l.paused},l.queue=l.push=function(a){return k?l:(null==a&&(k=!0),j.push(a),e(),l)},l.on("end",function(){l.readable=!1,!l.writable&&l.autoDestroy&&d.nextTick(function(){l.destroy()})}),l.end=function(a){return h?void 0:(h=!0,arguments.length&&l.write(a),g(),l)},l.destroy=function(){return i?void 0:(i=!0,h=!0,j.length=0,l.writable=l.readable=!1,l.emit("close"),l)},l.pause=function(){return l.paused?void 0:(l.paused=!0,l)},l.resume=function(){return l.paused&&(l.paused=!1,l.emit("resume")),e(),l.paused||l.emit("drain"),l},l}var f=a("stream");c=b.exports=e,e.through=e}).call(this,a("JkpR2F"))},{JkpR2F:23,stream:25}],17:[function(a,b){function c(a,b){if(a.getContext)for(var c=0;c<l.length;++c)try{var d=a.getContext(l[c],b||{});if(d)return d}catch(e){}}function d(a){for(var b=1;b<arguments.length;++b){var c=arguments[b];for(var d in c)void 0!==c[d]&&(a[d]=c[d])}return a}function e(a,b){function l(){v=[],t=c(a,w),a.addEventListener("webglcontextlost",m,!1),a.addEventListener("webglcontextrestored",n,!1)}function m(a){a.preventDefault(),t=null;for(var b=0;b<v.length;++b)v[b].onContextLost(a)}function n(b){t=c(a,w);var d;for(d=0;d<x.length;++d)x[d](b);for(d=0;d<v.length;++d)v[d].onContextRestored(b)}function o(){var a=t.createTexture();return t.bindTexture(t.TEXTURE_2D,a),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),a}function p(a,b){t.bindTexture(t.TEXTURE_2D,a),b?"function"==typeof b?b(t):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,b):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,2,2,0,t.RGBA,t.UNSIGNED_BYTE,null)}function q(a,b){var c,e=d({},b.uniforms,i.uniforms),g=d({},b.attributes,i.attributes),j=[],k=[];for(c in e)j.push({name:c,type:e[c]});for(c in g)k.push({name:c,type:g[c]});var l=f(t,h,a,j,k);return t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),l.attributes.position.pointer(),l}function r(){t.drawArrays(t.TRIANGLES,0,6)}function s(b){function c(){if(t){w=q(b,z),x={},y={};var a=0;for(var c in z.uniforms){var d=z.uniforms[c];"sampler2D"===d&&(t.activeTexture(t.TEXTURE0+a),x[c]=a,y[c]=o(),a++)}}}function e(){w=null}function f(){c()}function h(){var b=a.width,c=a.height;t.viewport(0,0,b,c),u&&(u.uniforms[k]=new Float32Array([b,c]));
var d=0,e=b,f=0,g=c;t.bufferData(t.ARRAY_BUFFER,new Float32Array([d,f,e,f,d,g,d,g,e,f,e,g]),t.STATIC_DRAW)}function i(a){w.uniforms[j]=a}function l(a,b){if(a in x){var c=x[a],d=y[a];t.activeTexture(t.TEXTURE0+c),t.bindTexture(t.TEXTURE_2D,d),p(d,b),w.uniforms[a]=c}else w.uniforms[a]=b}function m(){var a=!1;return w||(c(),a=!0),u!==w&&(u=w,w.bind(),a=!0),h(),a}function n(){u===w&&(u=null),w&&(w.dispose(),w=null)}function s(){return d({},z.uniforms)}var w,x,y,z=g(b),A={getGL:function(){return t},load:function(){w||c()},bind:function(){u!==w&&(u=w,w.bind())},isCurrentTransition:function(){return u===w},onContextLost:e,onContextRestored:f,syncViewport:h,setProgress:i,setUniform:l,reset:m,draw:r,destroy:n,getUniforms:s};return v.push(A),A}if(1!==arguments.length||!("getContext"in a))throw new Error("Bad arguments. usage: GlslTransitionCore(canvas)");var t,u,v,w=d({},b&&b.contextAttributes||{},e.defaults.contextAttributes),x=[];return s.onContextLost=function(a){x.push(a)},s.getGL=function(){return t},l(),s}var f=a("gl-shader-core"),g=a("glsl-exports"),h="attribute vec2 position; void main() { gl_Position = vec4(2.0*position-1.0, 0.0, 1.0);}",i=g(h),j="progress",k="resolution",l=["webgl","experimental-webgl"];e.defaults={contextAttributes:{preserveDrawingBuffer:!0}},e.isSupported=function(){var a=document.createElement("canvas");return!!c(a)},b.exports=e},{"gl-shader-core":5,"glsl-exports":6}],18:[function(a,b,c){function d(a,b,c){if(!(this instanceof d))return new d(a,b,c);var e=typeof a;if("base64"===b&&"string"===e)for(a=C(a);a.length%4!==0;)a+="=";var f;if("number"===e)f=E(a);else if("string"===e)f=d.byteLength(a,b);else{if("object"!==e)throw new Error("First argument needs to be a number, array or string.");f=E(a.length)}var g;d._useTypedArrays?g=d._augment(new Uint8Array(f)):(g=this,g.length=f,g._isBuffer=!0);var h;if(d._useTypedArrays&&"number"==typeof a.byteLength)g._set(a);else if(G(a))for(h=0;f>h;h++)g[h]=d.isBuffer(a)?a.readUInt8(h):a[h];else if("string"===e)g.write(a,0,b);else if("number"===e&&!d._useTypedArrays&&!c)for(h=0;f>h;h++)g[h]=0;return g}function e(a,b,c,e){c=Number(c)||0;var f=a.length-c;e?(e=Number(e),e>f&&(e=f)):e=f;var g=b.length;R(g%2===0,"Invalid hex string"),e>g/2&&(e=g/2);for(var h=0;e>h;h++){var i=parseInt(b.substr(2*h,2),16);R(!isNaN(i),"Invalid hex string"),a[c+h]=i}return d._charsWritten=2*h,h}function f(a,b,c,e){var f=d._charsWritten=M(I(b),a,c,e);return f}function g(a,b,c,e){var f=d._charsWritten=M(J(b),a,c,e);return f}function h(a,b,c,d){return g(a,b,c,d)}function i(a,b,c,e){var f=d._charsWritten=M(L(b),a,c,e);return f}function j(a,b,c,e){var f=d._charsWritten=M(K(b),a,c,e);return f}function k(a,b,c){return S.fromByteArray(0===b&&c===a.length?a:a.slice(b,c))}function l(a,b,c){var d="",e="";c=Math.min(a.length,c);for(var f=b;c>f;f++)a[f]<=127?(d+=N(e)+String.fromCharCode(a[f]),e=""):e+="%"+a[f].toString(16);return d+N(e)}function m(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(a[e]);return d}function n(a,b,c){return m(a,b,c)}function o(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=H(a[f]);return e}function p(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function q(a,b,c,d){d||(R("boolean"==typeof c,"missing or invalid endian"),R(void 0!==b&&null!==b,"missing offset"),R(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f;return c?(f=a[b],e>b+1&&(f|=a[b+1]<<8)):(f=a[b]<<8,e>b+1&&(f|=a[b+1])),f}}function r(a,b,c,d){d||(R("boolean"==typeof c,"missing or invalid endian"),R(void 0!==b&&null!==b,"missing offset"),R(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f;return c?(e>b+2&&(f=a[b+2]<<16),e>b+1&&(f|=a[b+1]<<8),f|=a[b],e>b+3&&(f+=a[b+3]<<24>>>0)):(e>b+1&&(f=a[b+1]<<16),e>b+2&&(f|=a[b+2]<<8),e>b+3&&(f|=a[b+3]),f+=a[b]<<24>>>0),f}}function s(a,b,c,d){d||(R("boolean"==typeof c,"missing or invalid endian"),R(void 0!==b&&null!==b,"missing offset"),R(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f=q(a,b,c,!0),g=32768&f;return g?-1*(65535-f+1):f}}function t(a,b,c,d){d||(R("boolean"==typeof c,"missing or invalid endian"),R(void 0!==b&&null!==b,"missing offset"),R(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f=r(a,b,c,!0),g=2147483648&f;return g?-1*(4294967295-f+1):f}}function u(a,b,c,d){return d||(R("boolean"==typeof c,"missing or invalid endian"),R(b+3<a.length,"Trying to read beyond buffer length")),T.read(a,b,c,23,4)}function v(a,b,c,d){return d||(R("boolean"==typeof c,"missing or invalid endian"),R(b+7<a.length,"Trying to read beyond buffer length")),T.read(a,b,c,52,8)}function w(a,b,c,d,e){e||(R(void 0!==b&&null!==b,"missing value"),R("boolean"==typeof d,"missing or invalid endian"),R(void 0!==c&&null!==c,"missing offset"),R(c+1<a.length,"trying to write beyond buffer length"),O(b,65535));var f=a.length;if(!(c>=f))for(var g=0,h=Math.min(f-c,2);h>g;g++)a[c+g]=(b&255<<8*(d?g:1-g))>>>8*(d?g:1-g)}function x(a,b,c,d,e){e||(R(void 0!==b&&null!==b,"missing value"),R("boolean"==typeof d,"missing or invalid endian"),R(void 0!==c&&null!==c,"missing offset"),R(c+3<a.length,"trying to write beyond buffer length"),O(b,4294967295));var f=a.length;if(!(c>=f))for(var g=0,h=Math.min(f-c,4);h>g;g++)a[c+g]=b>>>8*(d?g:3-g)&255}function y(a,b,c,d,e){e||(R(void 0!==b&&null!==b,"missing value"),R("boolean"==typeof d,"missing or invalid endian"),R(void 0!==c&&null!==c,"missing offset"),R(c+1<a.length,"Trying to write beyond buffer length"),P(b,32767,-32768));var f=a.length;c>=f||(b>=0?w(a,b,c,d,e):w(a,65535+b+1,c,d,e))}function z(a,b,c,d,e){e||(R(void 0!==b&&null!==b,"missing value"),R("boolean"==typeof d,"missing or invalid endian"),R(void 0!==c&&null!==c,"missing offset"),R(c+3<a.length,"Trying to write beyond buffer length"),P(b,2147483647,-2147483648));var f=a.length;c>=f||(b>=0?x(a,b,c,d,e):x(a,4294967295+b+1,c,d,e))}function A(a,b,c,d,e){e||(R(void 0!==b&&null!==b,"missing value"),R("boolean"==typeof d,"missing or invalid endian"),R(void 0!==c&&null!==c,"missing offset"),R(c+3<a.length,"Trying to write beyond buffer length"),Q(b,3.4028234663852886e38,-3.4028234663852886e38));var f=a.length;c>=f||T.write(a,b,c,d,23,4)}function B(a,b,c,d,e){e||(R(void 0!==b&&null!==b,"missing value"),R("boolean"==typeof d,"missing or invalid endian"),R(void 0!==c&&null!==c,"missing offset"),R(c+7<a.length,"Trying to write beyond buffer length"),Q(b,1.7976931348623157e308,-1.7976931348623157e308));var f=a.length;c>=f||T.write(a,b,c,d,52,8)}function C(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function D(a,b,c){return"number"!=typeof a?c:(a=~~a,a>=b?b:a>=0?a:(a+=b,a>=0?a:0))}function E(a){return a=~~Math.ceil(+a),0>a?0:a}function F(a){return(Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)})(a)}function G(a){return F(a)||d.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length}function H(a){return 16>a?"0"+a.toString(16):a.toString(16)}function I(a){for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);if(127>=d)b.push(a.charCodeAt(c));else{var e=c;d>=55296&&57343>=d&&c++;for(var f=encodeURIComponent(a.slice(e,c+1)).substr(1).split("%"),g=0;g<f.length;g++)b.push(parseInt(f[g],16))}}return b}function J(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function K(a){for(var b,c,d,e=[],f=0;f<a.length;f++)b=a.charCodeAt(f),c=b>>8,d=b%256,e.push(d),e.push(c);return e}function L(a){return S.toByteArray(a)}function M(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}function N(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}function O(a,b){R("number"==typeof a,"cannot write a non-number as a number"),R(a>=0,"specified a negative value for writing an unsigned value"),R(b>=a,"value is larger than maximum value for type"),R(Math.floor(a)===a,"value has a fractional component")}function P(a,b,c){R("number"==typeof a,"cannot write a non-number as a number"),R(b>=a,"value larger than maximum allowed value"),R(a>=c,"value smaller than minimum allowed value"),R(Math.floor(a)===a,"value has a fractional component")}function Q(a,b,c){R("number"==typeof a,"cannot write a non-number as a number"),R(b>=a,"value larger than maximum allowed value"),R(a>=c,"value smaller than minimum allowed value")}function R(a,b){if(!a)throw new Error(b||"Failed assertion")}var S=a("base64-js"),T=a("ieee754");c.Buffer=d,c.SlowBuffer=d,c.INSPECT_MAX_BYTES=50,d.poolSize=8192,d._useTypedArrays=function(){try{var a=new ArrayBuffer(0),b=new Uint8Array(a);return b.foo=function(){return 42},42===b.foo()&&"function"==typeof b.subarray}catch(c){return!1}}(),d.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.isBuffer=function(a){return!(null===a||void 0===a||!a._isBuffer)},d.byteLength=function(a,b){var c;switch(a+="",b||"utf8"){case"hex":c=a.length/2;break;case"utf8":case"utf-8":c=I(a).length;break;case"ascii":case"binary":case"raw":c=a.length;break;case"base64":c=L(a).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":c=2*a.length;break;default:throw new Error("Unknown encoding")}return c},d.concat=function(a,b){if(R(F(a),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===a.length)return new d(0);if(1===a.length)return a[0];var c;if("number"!=typeof b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var e=new d(b),f=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(e,f),f+=g.length}return e},d.prototype.write=function(a,b,c,d){if(isFinite(b))isFinite(c)||(d=c,c=void 0);else{var k=d;d=b,b=c,c=k}b=Number(b)||0;var l=this.length-b;c?(c=Number(c),c>l&&(c=l)):c=l,d=String(d||"utf8").toLowerCase();var m;switch(d){case"hex":m=e(this,a,b,c);break;case"utf8":case"utf-8":m=f(this,a,b,c);break;case"ascii":m=g(this,a,b,c);break;case"binary":m=h(this,a,b,c);break;case"base64":m=i(this,a,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":m=j(this,a,b,c);break;default:throw new Error("Unknown encoding")}return m},d.prototype.toString=function(a,b,c){var d=this;if(a=String(a||"utf8").toLowerCase(),b=Number(b)||0,c=void 0!==c?Number(c):c=d.length,c===b)return"";var e;switch(a){case"hex":e=o(d,b,c);break;case"utf8":case"utf-8":e=l(d,b,c);break;case"ascii":e=m(d,b,c);break;case"binary":e=n(d,b,c);break;case"base64":e=k(d,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":e=p(d,b,c);break;default:throw new Error("Unknown encoding")}return e},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},d.prototype.copy=function(a,b,c,e){var f=this;if(c||(c=0),e||0===e||(e=this.length),b||(b=0),e!==c&&0!==a.length&&0!==f.length){R(e>=c,"sourceEnd < sourceStart"),R(b>=0&&b<a.length,"targetStart out of bounds"),R(c>=0&&c<f.length,"sourceStart out of bounds"),R(e>=0&&e<=f.length,"sourceEnd out of bounds"),e>this.length&&(e=this.length),a.length-b<e-c&&(e=a.length-b+c);var g=e-c;if(100>g||!d._useTypedArrays)for(var h=0;g>h;h++)a[h+b]=this[h+c];else a._set(this.subarray(c,c+g),b)}},d.prototype.slice=function(a,b){var c=this.length;if(a=D(a,c,0),b=D(b,c,c),d._useTypedArrays)return d._augment(this.subarray(a,b));for(var e=b-a,f=new d(e,void 0,!0),g=0;e>g;g++)f[g]=this[g+a];return f},d.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},d.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},d.prototype.readUInt8=function(a,b){return b||(R(void 0!==a&&null!==a,"missing offset"),R(a<this.length,"Trying to read beyond buffer length")),a>=this.length?void 0:this[a]},d.prototype.readUInt16LE=function(a,b){return q(this,a,!0,b)},d.prototype.readUInt16BE=function(a,b){return q(this,a,!1,b)},d.prototype.readUInt32LE=function(a,b){return r(this,a,!0,b)},d.prototype.readUInt32BE=function(a,b){return r(this,a,!1,b)},d.prototype.readInt8=function(a,b){if(b||(R(void 0!==a&&null!==a,"missing offset"),R(a<this.length,"Trying to read beyond buffer length")),!(a>=this.length)){var c=128&this[a];return c?-1*(255-this[a]+1):this[a]}},d.prototype.readInt16LE=function(a,b){return s(this,a,!0,b)},d.prototype.readInt16BE=function(a,b){return s(this,a,!1,b)},d.prototype.readInt32LE=function(a,b){return t(this,a,!0,b)},d.prototype.readInt32BE=function(a,b){return t(this,a,!1,b)},d.prototype.readFloatLE=function(a,b){return u(this,a,!0,b)},d.prototype.readFloatBE=function(a,b){return u(this,a,!1,b)},d.prototype.readDoubleLE=function(a,b){return v(this,a,!0,b)},d.prototype.readDoubleBE=function(a,b){return v(this,a,!1,b)},d.prototype.writeUInt8=function(a,b,c){c||(R(void 0!==a&&null!==a,"missing value"),R(void 0!==b&&null!==b,"missing offset"),R(b<this.length,"trying to write beyond buffer length"),O(a,255)),b>=this.length||(this[b]=a)},d.prototype.writeUInt16LE=function(a,b,c){w(this,a,b,!0,c)},d.prototype.writeUInt16BE=function(a,b,c){w(this,a,b,!1,c)},d.prototype.writeUInt32LE=function(a,b,c){x(this,a,b,!0,c)},d.prototype.writeUInt32BE=function(a,b,c){x(this,a,b,!1,c)},d.prototype.writeInt8=function(a,b,c){c||(R(void 0!==a&&null!==a,"missing value"),R(void 0!==b&&null!==b,"missing offset"),R(b<this.length,"Trying to write beyond buffer length"),P(a,127,-128)),b>=this.length||(a>=0?this.writeUInt8(a,b,c):this.writeUInt8(255+a+1,b,c))},d.prototype.writeInt16LE=function(a,b,c){y(this,a,b,!0,c)},d.prototype.writeInt16BE=function(a,b,c){y(this,a,b,!1,c)},d.prototype.writeInt32LE=function(a,b,c){z(this,a,b,!0,c)},d.prototype.writeInt32BE=function(a,b,c){z(this,a,b,!1,c)},d.prototype.writeFloatLE=function(a,b,c){A(this,a,b,!0,c)},d.prototype.writeFloatBE=function(a,b,c){A(this,a,b,!1,c)},d.prototype.writeDoubleLE=function(a,b,c){B(this,a,b,!0,c)},d.prototype.writeDoubleBE=function(a,b,c){B(this,a,b,!1,c)},d.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),"string"==typeof a&&(a=a.charCodeAt(0)),R("number"==typeof a&&!isNaN(a),"value is not a number"),R(c>=b,"end < start"),c!==b&&0!==this.length){R(b>=0&&b<this.length,"start out of bounds"),R(c>=0&&c<=this.length,"end out of bounds");for(var d=b;c>d;d++)this[d]=a}},d.prototype.inspect=function(){for(var a=[],b=this.length,d=0;b>d;d++)if(a[d]=H(this[d]),d===c.INSPECT_MAX_BYTES){a[d+1]="...";break}return"<Buffer "+a.join(" ")+">"},d.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(d._useTypedArrays)return new d(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;c>b;b+=1)a[b]=this[b];return a.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var U=d.prototype;d._augment=function(a){return a._isBuffer=!0,a._get=a.get,a._set=a.set,a.get=U.get,a.set=U.set,a.write=U.write,a.toString=U.toString,a.toLocaleString=U.toString,a.toJSON=U.toJSON,a.copy=U.copy,a.slice=U.slice,a.readUInt8=U.readUInt8,a.readUInt16LE=U.readUInt16LE,a.readUInt16BE=U.readUInt16BE,a.readUInt32LE=U.readUInt32LE,a.readUInt32BE=U.readUInt32BE,a.readInt8=U.readInt8,a.readInt16LE=U.readInt16LE,a.readInt16BE=U.readInt16BE,a.readInt32LE=U.readInt32LE,a.readInt32BE=U.readInt32BE,a.readFloatLE=U.readFloatLE,a.readFloatBE=U.readFloatBE,a.readDoubleLE=U.readDoubleLE,a.readDoubleBE=U.readDoubleBE,a.writeUInt8=U.writeUInt8,a.writeUInt16LE=U.writeUInt16LE,a.writeUInt16BE=U.writeUInt16BE,a.writeUInt32LE=U.writeUInt32LE,a.writeUInt32BE=U.writeUInt32BE,a.writeInt8=U.writeInt8,a.writeInt16LE=U.writeInt16LE,a.writeInt16BE=U.writeInt16BE,a.writeInt32LE=U.writeInt32LE,a.writeInt32BE=U.writeInt32BE,a.writeFloatLE=U.writeFloatLE,a.writeFloatBE=U.writeFloatBE,a.writeDoubleLE=U.writeDoubleLE,a.writeDoubleBE=U.writeDoubleBE,a.fill=U.fill,a.inspect=U.inspect,a.toArrayBuffer=U.toArrayBuffer,a}},{"base64-js":19,ieee754:20}],19:[function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(a){"use strict";function b(a){var b=a.charCodeAt(0);return b===g?62:b===h?63:i>b?-1:i+10>b?b-i+26+26:k+26>b?b-k:j+26>b?b-j+26:void 0}function c(a){function c(a){j[l++]=a}var d,e,g,h,i,j;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=a.length;i="="===a.charAt(k-2)?2:"="===a.charAt(k-1)?1:0,j=new f(3*a.length/4-i),g=i>0?a.length-4:a.length;var l=0;for(d=0,e=0;g>d;d+=4,e+=3)h=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,c(255&h)):1===i&&(h=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return d.charAt(a)}function c(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;g>e;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=c(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g="+".charCodeAt(0),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0);a.toByteArray=c,a.fromByteArray=e}("undefined"==typeof c?this.base64js={}:c)},{}],20:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?0/0:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||1/0===b?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],21:[function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length))throw b=arguments[1],b instanceof Error?b:TypeError('Uncaught, unspecified "error" event.');if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];c.apply(this,h)}else if(f(c)){for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];for(j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h)}return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned){var e;e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?d(a._events[b])?1:a._events[b].length:0}},{}],22:[function(a,b){b.exports="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],23:[function(a,b){function c(){}var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")}},{}],24:[function(a,b){function c(a){return this instanceof c?(g.call(this,a),h.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",d)):new c(a)}function d(){if(!this.allowHalfOpen&&!this._writableState.ended){var a=this;f(function(){a.end()})}}b.exports=c;var e=a("inherits"),f=a("process/browser.js").nextTick,g=a("./readable.js"),h=a("./writable.js");e(c,g),c.prototype.write=h.prototype.write,c.prototype.end=h.prototype.end,c.prototype._write=h.prototype._write},{"./readable.js":28,"./writable.js":30,inherits:22,"process/browser.js":26}],25:[function(a,b){function c(){d.call(this)}b.exports=c;var d=a("events").EventEmitter,e=a("inherits");e(c,d),c.Readable=a("./readable.js"),c.Writable=a("./writable.js"),c.Duplex=a("./duplex.js"),c.Transform=a("./transform.js"),c.PassThrough=a("./passthrough.js"),c.Stream=c,c.prototype.pipe=function(a,b){function c(b){a.writable&&!1===a.write(b)&&j.pause&&j.pause()}function e(){j.readable&&j.resume&&j.resume()}function f(){k||(k=!0,a.end())}function g(){k||(k=!0,"function"==typeof a.destroy&&a.destroy())}function h(a){if(i(),0===d.listenerCount(this,"error"))throw a}function i(){j.removeListener("data",c),a.removeListener("drain",e),j.removeListener("end",f),j.removeListener("close",g),j.removeListener("error",h),a.removeListener("error",h),j.removeListener("end",i),j.removeListener("close",i),a.removeListener("close",i)}var j=this;j.on("data",c),a.on("drain",e),a._isStdio||b&&b.end===!1||(j.on("end",f),j.on("close",g));var k=!1;return j.on("error",h),a.on("error",h),j.on("end",i),j.on("close",i),a.on("close",i),a.emit("pipe",j),a}},{"./duplex.js":24,"./passthrough.js":27,"./readable.js":28,"./transform.js":29,"./writable.js":30,events:21,inherits:22}],26:[function(a,b){var c=b.exports={};c.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),c.title="browser",c.browser=!0,c.env={},c.argv=[],c.binding=function(){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(){throw new Error("process.chdir is not supported")}},{}],27:[function(a,b){function c(a){return this instanceof c?void d.call(this,a):new c(a)}b.exports=c;var d=a("./transform.js"),e=a("inherits");e(c,d),c.prototype._transform=function(a,b,c){c(null,a)}},{"./transform.js":29,inherits:22}],28:[function(a,b){(function(c){function d(b){b=b||{};var c=b.highWaterMark;this.highWaterMark=c||0===c?c:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!b.objectMode,this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(x||(x=a("string_decoder").StringDecoder),this.decoder=new x(b.encoding),this.encoding=b.encoding)}function e(a){return this instanceof e?(this._readableState=new d(a,this),this.readable=!0,void z.call(this)):new e(a)}function f(a,b,c,d,e){var f=j(b,c);if(f)a.emit("error",f);else if(null===c||void 0===c)b.reading=!1,b.ended||k(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var h=new Error("stream.push() after EOF");a.emit("error",h)}else if(b.endEmitted&&e){var h=new Error("stream.unshift() after end event");a.emit("error",h)}else!b.decoder||e||d||(c=b.decoder.write(c)),b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):(b.reading=!1,b.buffer.push(c)),b.needReadable&&l(a),n(a,b);else e||(b.reading=!1);return g(b)}function g(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function h(a){if(a>=D)a=D;else{a--;for(var b=1;32>b;b<<=1)a|=a>>b;a++}return a}function i(a,b){return 0===b.length&&b.ended?0:b.objectMode?0===a?0:1:isNaN(a)||null===a?b.flowing&&b.buffer.length?b.buffer[0].length:b.length:0>=a?0:(a>b.highWaterMark&&(b.highWaterMark=h(a)),a>b.length?b.ended?b.length:(b.needReadable=!0,0):a)}function j(a,b){var c=null;return A.isBuffer(b)||"string"==typeof b||null===b||void 0===b||a.objectMode||c||(c=new TypeError("Invalid non-string/buffer chunk")),c}function k(a,b){if(b.decoder&&!b.ended){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,b.length>0?l(a):u(a)}function l(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(b.emittedReadable=!0,b.sync?B(function(){m(a)}):m(a))}function m(a){a.emit("readable")}function n(a,b){b.readingMore||(b.readingMore=!0,B(function(){o(a,b)}))}function o(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function p(a){return function(){var b=a._readableState;b.awaitDrain--,0===b.awaitDrain&&q(a)}}function q(a){function b(a){var b=a.write(c);!1===b&&d.awaitDrain++}var c,d=a._readableState;for(d.awaitDrain=0;d.pipesCount&&null!==(c=a.read());)if(1===d.pipesCount?b(d.pipes,0,null):v(d.pipes,b),a.emit("data",c),d.awaitDrain>0)return;return 0===d.pipesCount?(d.flowing=!1,void(y.listenerCount(a,"data")>0&&s(a))):void(d.ranOut=!0)}function r(){this._readableState.ranOut&&(this._readableState.ranOut=!1,q(this))}function s(a,b){var c=a._readableState;if(c.flowing)throw new Error("Cannot switch to old mode now.");var d=b||!1,e=!1;a.readable=!0,a.pipe=z.prototype.pipe,a.on=a.addListener=z.prototype.on,a.on("readable",function(){e=!0;for(var b;!d&&null!==(b=a.read());)a.emit("data",b);null===b&&(e=!1,a._readableState.needReadable=!0)}),a.pause=function(){d=!0,this.emit("pause")},a.resume=function(){d=!1,e?B(function(){a.emit("readable")}):this.read(0),this.emit("resume")},a.emit("readable")}function t(a,b){var c,d=b.buffer,e=b.length,f=!!b.decoder,g=!!b.objectMode;if(0===d.length)return null;if(0===e)c=null;else if(g)c=d.shift();else if(!a||a>=e)c=f?d.join(""):A.concat(d,e),d.length=0;else if(a<d[0].length){var h=d[0];c=h.slice(0,a),d[0]=h.slice(a)}else if(a===d[0].length)c=d.shift();else{c=f?"":new A(a);for(var i=0,j=0,k=d.length;k>j&&a>i;j++){var h=d[0],l=Math.min(a-i,h.length);f?c+=h.slice(0,l):h.copy(c,i,0,l),l<h.length?d[0]=h.slice(l):d.shift(),i+=l}}return c}function u(a){var b=a._readableState;if(b.length>0)throw new Error("endReadable called on non-empty stream");!b.endEmitted&&b.calledRead&&(b.ended=!0,B(function(){b.endEmitted||0!==b.length||(b.endEmitted=!0,a.readable=!1,a.emit("end"))}))}function v(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}function w(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}b.exports=e,e.ReadableState=d;var x,y=a("events").EventEmitter,z=a("./index.js"),A=a("buffer").Buffer,B=a("process/browser.js").nextTick,C=a("inherits");C(e,z),e.prototype.push=function(a,b){var c=this._readableState;return"string"!=typeof a||c.objectMode||(b=b||c.defaultEncoding,b!==c.encoding&&(a=new A(a,b),b="")),f(this,c,a,b,!1)},e.prototype.unshift=function(a){var b=this._readableState;return f(this,b,a,"",!0)},e.prototype.setEncoding=function(b){x||(x=a("string_decoder").StringDecoder),this._readableState.decoder=new x(b),this._readableState.encoding=b};var D=8388608;e.prototype.read=function(a){var b=this._readableState;b.calledRead=!0;var c=a;if(("number"!=typeof a||a>0)&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return l(this),null;if(a=i(a,b),0===a&&b.ended)return 0===b.length&&u(this),null;var d=b.needReadable;b.length-a<=b.highWaterMark&&(d=!0),(b.ended||b.reading)&&(d=!1),d&&(b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1),d&&!b.reading&&(a=i(c,b));var e;return e=a>0?t(a,b):null,null===e&&(b.needReadable=!0,a=0),b.length-=a,0!==b.length||b.ended||(b.needReadable=!0),b.ended&&!b.endEmitted&&0===b.length&&u(this),e},e.prototype._read=function(){this.emit("error",new Error("not implemented"))},e.prototype.pipe=function(a,b){function d(a){a===k&&f()}function e(){a.end()}function f(){a.removeListener("close",h),a.removeListener("finish",i),a.removeListener("drain",o),a.removeListener("error",g),a.removeListener("unpipe",d),k.removeListener("end",e),k.removeListener("end",f),(!a._writableState||a._writableState.needDrain)&&o()}function g(b){j(),0===s&&0===y.listenerCount(a,"error")&&a.emit("error",b)}function h(){a.removeListener("finish",i),j()}function i(){a.removeListener("close",h),j()}function j(){k.unpipe(a)}var k=this,l=this._readableState;
switch(l.pipesCount){case 0:l.pipes=a;break;case 1:l.pipes=[l.pipes,a];break;default:l.pipes.push(a)}l.pipesCount+=1;var m=(!b||b.end!==!1)&&a!==c.stdout&&a!==c.stderr,n=m?e:f;l.endEmitted?B(n):k.once("end",n),a.on("unpipe",d);var o=p(k);a.on("drain",o);var s=y.listenerCount(a,"error");return a.once("error",g),a.once("close",h),a.once("finish",i),a.emit("pipe",k),l.flowing||(this.on("readable",r),l.flowing=!0,B(function(){q(k)})),a},e.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,this.removeListener("readable",r),b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,this.removeListener("readable",r),b.flowing=!1;for(var e=0;d>e;e++)c[e].emit("unpipe",this);return this}var e=w(b.pipes,a);return-1===e?this:(b.pipes.splice(e,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},e.prototype.on=function(a,b){var c=z.prototype.on.call(this,a,b);if("data"!==a||this._readableState.flowing||s(this),"readable"===a&&this.readable){var d=this._readableState;d.readableListening||(d.readableListening=!0,d.emittedReadable=!1,d.needReadable=!0,d.reading?d.length&&l(this,d):this.read(0))}return c},e.prototype.addListener=e.prototype.on,e.prototype.resume=function(){s(this),this.read(0),this.emit("resume")},e.prototype.pause=function(){s(this,!0),this.emit("pause")},e.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(b.decoder&&(e=b.decoder.write(e)),e&&(b.objectMode||e.length)){var f=d.push(e);f||(c=!0,a.pause())}});for(var e in a)"function"==typeof a[e]&&"undefined"==typeof this[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));var f=["error","close","destroy","pause","resume"];return v(f,function(b){a.on(b,function(a){return d.emit.apply(d,b,a)})}),d._read=function(){c&&(c=!1,a.resume())},d},e._fromList=t}).call(this,a("JkpR2F"))},{"./index.js":25,JkpR2F:23,buffer:18,events:21,inherits:22,"process/browser.js":26,string_decoder:31}],29:[function(a,b){function c(a,b){this.afterTransform=function(a,c){return d(b,a,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function d(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e&&e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function e(a){if(!(this instanceof e))return new e(a);g.call(this,a);var b=(this._transformState=new c(a,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(a){f(b,a)}):f(b)})}function f(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=(a._readableState,a._transformState);if(c.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return a.push(null)}b.exports=e;var g=a("./duplex.js"),h=a("inherits");h(e,g),e.prototype.push=function(a,b){return this._transformState.needTransform=!1,g.prototype.push.call(this,a,b)},e.prototype._transform=function(){throw new Error("not implemented")},e.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},e.prototype._read=function(){var a=this._transformState;a.writechunk&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0}},{"./duplex.js":24,inherits:22}],30:[function(a,b){function c(a,b,c){this.chunk=a,this.encoding=b,this.callback=c}function d(a,b){a=a||{};var c=a.highWaterMark;this.highWaterMark=c||0===c?c:16384,this.objectMode=!!a.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var d=a.decodeStrings===!1;this.decodeStrings=!d,this.defaultEncoding=a.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){m(b,a)},this.writecb=null,this.writelen=0,this.buffer=[]}function e(a){return this instanceof e||this instanceof w.Duplex?(this._writableState=new d(a,this),this.writable=!0,void w.call(this)):new e(a)}function f(a,b,c){var d=new Error("write after end");a.emit("error",d),x(function(){c(d)})}function g(a,b,c,d){var e=!0;if(!y.isBuffer(c)&&"string"!=typeof c&&null!==c&&void 0!==c&&!b.objectMode){var f=new TypeError("Invalid non-string/buffer chunk");a.emit("error",f),x(function(){d(f)}),e=!1}return e}function h(a,b,c){return a.objectMode||a.decodeStrings===!1||"string"!=typeof b||(b=new y(b,c)),b}function i(a,b,d,e,f){d=h(b,d,e);var g=b.objectMode?1:d.length;b.length+=g;var i=b.length<b.highWaterMark;return b.needDrain=!i,b.writing?b.buffer.push(new c(d,e,f)):j(a,b,g,d,e,f),i}function j(a,b,c,d,e,f){b.writelen=c,b.writecb=f,b.writing=!0,b.sync=!0,a._write(d,e,b.onwrite),b.sync=!1}function k(a,b,c,d,e){c?x(function(){e(d)}):e(d),a.emit("error",d)}function l(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function m(a,b){var c=a._writableState,d=c.sync,e=c.writecb;if(l(c),b)k(a,c,d,b,e);else{var f=q(a,c);f||c.bufferProcessing||!c.buffer.length||p(a,c),d?x(function(){n(a,c,f,e)}):n(a,c,f,e)}}function n(a,b,c,d){c||o(a,b),d(),c&&r(a,b)}function o(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function p(a,b){b.bufferProcessing=!0;for(var c=0;c<b.buffer.length;c++){var d=b.buffer[c],e=d.chunk,f=d.encoding,g=d.callback,h=b.objectMode?1:e.length;if(j(a,b,h,e,f,g),b.writing){c++;break}}b.bufferProcessing=!1,c<b.buffer.length?b.buffer=b.buffer.slice(c):b.buffer.length=0}function q(a,b){return b.ending&&0===b.length&&!b.finished&&!b.writing}function r(a,b){var c=q(a,b);return c&&(b.finished=!0,a.emit("finish")),c}function s(a,b,c){b.ending=!0,r(a,b),c&&(b.finished?x(c):a.once("finish",c)),b.ended=!0}b.exports=e,e.WritableState=d;var t="undefined"!=typeof Uint8Array?function(a){return a instanceof Uint8Array}:function(a){return a&&a.constructor&&"Uint8Array"===a.constructor.name},u="undefined"!=typeof ArrayBuffer?function(a){return a instanceof ArrayBuffer}:function(a){return a&&a.constructor&&"ArrayBuffer"===a.constructor.name},v=a("inherits"),w=a("./index.js"),x=a("process/browser.js").nextTick,y=a("buffer").Buffer;v(e,w),e.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},e.prototype.write=function(a,b,c){var d=this._writableState,e=!1;return"function"==typeof b&&(c=b,b=null),!y.isBuffer(a)&&t(a)&&(a=new y(a)),u(a)&&"undefined"!=typeof Uint8Array&&(a=new y(new Uint8Array(a))),y.isBuffer(a)?b="buffer":b||(b=d.defaultEncoding),"function"!=typeof c&&(c=function(){}),d.ended?f(this,d,c):g(this,d,a,c)&&(e=i(this,d,a,b,c)),e},e.prototype._write=function(a,b,c){c(new Error("not implemented"))},e.prototype.end=function(a,b,c){var d=this._writableState;"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),"undefined"!=typeof a&&null!==a&&this.write(a,b),d.ending||d.finished||s(this,d,c)}},{"./index.js":25,buffer:18,inherits:22,"process/browser.js":26}],31:[function(a,b,c){function d(a){if(a&&!h.isEncoding(a))throw new Error("Unknown encoding: "+a)}function e(a){return a.toString(this.encoding)}function f(a){var b=this.charReceived=a.length%2;return this.charLength=b?2:0,b}function g(a){var b=this.charReceived=a.length%3;return this.charLength=b?3:0,b}var h=a("buffer").Buffer,i=c.StringDecoder=function(a){switch(this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,""),d(a),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=f;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=g;break;default:return void(this.write=e)}this.charBuffer=new h(6),this.charReceived=0,this.charLength=0};i.prototype.write=function(a){for(var b="",c=0;this.charLength;){var d=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;if(a.copy(this.charBuffer,this.charReceived,c,d),this.charReceived+=d-c,c=d,this.charReceived<this.charLength)return"";b=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var e=b.charCodeAt(b.length-1);if(!(e>=55296&&56319>=e)){if(this.charReceived=this.charLength=0,d==a.length)return b;a=a.slice(d,a.length);break}this.charLength+=this.surrogateSize,b=""}var f=this.detectIncompleteChar(a),g=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-f,g),this.charReceived=f,g-=f),b+=a.toString(this.encoding,0,g);var g=b.length-1,e=b.charCodeAt(g);if(e>=55296&&56319>=e){var h=this.surrogateSize;return this.charLength+=h,this.charReceived+=h,this.charBuffer.copy(this.charBuffer,h,0,h),this.charBuffer.write(b.charAt(b.length-1),this.encoding),b.substring(0,g)}return b},i.prototype.detectIncompleteChar=function(a){for(var b=a.length>=3?3:a.length;b>0;b--){var c=a[a.length-b];if(1==b&&c>>5==6){this.charLength=2;break}if(2>=b&&c>>4==14){this.charLength=3;break}if(3>=b&&c>>3==30){this.charLength=4;break}}return b},i.prototype.end=function(a){var b="";if(a&&a.length&&(b=this.write(a)),this.charReceived){var c=this.charReceived,d=this.charBuffer,e=this.encoding;b+=d.slice(0,c).toString(e)}return b}},{buffer:18}],32:[function(a,b){(function(a){(function(){var c,d,e;"undefined"!=typeof performance&&null!==performance&&performance.now?b.exports=function(){return performance.now()}:"undefined"!=typeof a&&null!==a&&a.hrtime?(b.exports=function(){return(c()-e)/1e6},d=a.hrtime,c=function(){var a;return a=d(),1e9*a[0]+a[1]},e=c()):Date.now?(b.exports=function(){return Date.now()-e},e=Date.now()):(b.exports=function(){return(new Date).getTime()-e},e=(new Date).getTime())}).call(this)}).call(this,a("JkpR2F"))},{JkpR2F:23}],33:[function(b,c,d){(function(b){!function(b){if("function"==typeof bootstrap)bootstrap("promise",b);else if("object"==typeof d)c.exports=b();else if("function"==typeof a&&a.amd)a(b);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=b}else Q=b()}(function(){"use strict";function a(a){return function(){return W.apply(a,arguments)}}function c(a){return a===Object(a)}function d(a){return"[object StopIteration]"===cb(a)||a instanceof S}function e(a,b){if(P&&b.stack&&"object"==typeof a&&null!==a&&a.stack&&-1===a.stack.indexOf(db)){for(var c=[],d=b;d;d=d.source)d.stack&&c.unshift(d.stack);c.unshift(a.stack);var e=c.join("\n"+db+"\n");a.stack=f(e)}}function f(a){for(var b=a.split("\n"),c=[],d=0;d<b.length;++d){var e=b[d];i(e)||g(e)||!e||c.push(e)}return c.join("\n")}function g(a){return-1!==a.indexOf("(module.js:")||-1!==a.indexOf("(node.js:")}function h(a){var b=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(a);if(b)return[b[1],Number(b[2])];var c=/at ([^ ]+):(\d+):(?:\d+)$/.exec(a);if(c)return[c[1],Number(c[2])];var d=/.*@(.+):(\d+)$/.exec(a);return d?[d[1],Number(d[2])]:void 0}function i(a){var b=h(a);if(!b)return!1;var c=b[0],d=b[1];return c===R&&d>=T&&hb>=d}function j(){if(P)try{throw new Error}catch(a){var b=a.stack.split("\n"),c=b[0].indexOf("@")>0?b[1]:b[2],d=h(c);if(!d)return;return R=d[0],d[1]}}function k(a,b,c){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(b+" is deprecated, use "+c+" instead.",new Error("").stack),a.apply(a,arguments)}}function l(a){return s(a)?a:t(a)?C(a):B(a)}function m(){function a(a){b=a,f.source=a,Y(c,function(b,c){V(function(){a.promiseDispatch.apply(a,c)})},void 0),c=void 0,d=void 0}var b,c=[],d=[],e=_(m.prototype),f=_(p.prototype);if(f.promiseDispatch=function(a,e,f){var g=X(arguments);c?(c.push(g),"when"===e&&f[1]&&d.push(f[1])):V(function(){b.promiseDispatch.apply(b,g)})},f.valueOf=function(){if(c)return f;var a=r(b);return s(a)&&(b=a),a},f.inspect=function(){return b?b.inspect():{state:"pending"}},l.longStackSupport&&P)try{throw new Error}catch(g){f.stack=g.stack.substring(g.stack.indexOf("\n")+1)}return e.promise=f,e.resolve=function(c){b||a(l(c))},e.fulfill=function(c){b||a(B(c))},e.reject=function(c){b||a(A(c))},e.notify=function(a){b||Y(d,function(b,c){V(function(){c(a)})},void 0)},e}function n(a){if("function"!=typeof a)throw new TypeError("resolver must be a function.");var b=m();try{a(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}return b.promise}function o(a){return n(function(b,c){for(var d=0,e=a.length;e>d;d++)l(a[d]).then(b,c)})}function p(a,b,c){void 0===b&&(b=function(a){return A(new Error("Promise does not support operation: "+a))}),void 0===c&&(c=function(){return{state:"unknown"}});var d=_(p.prototype);if(d.promiseDispatch=function(c,e,f){var g;try{g=a[e]?a[e].apply(d,f):b.call(d,e,f)}catch(h){g=A(h)}c&&c(g)},d.inspect=c,c){var e=c();"rejected"===e.state&&(d.exception=e.reason),d.valueOf=function(){var a=c();return"pending"===a.state||"rejected"===a.state?d:a.value}}return d}function q(a,b,c,d){return l(a).then(b,c,d)}function r(a){if(s(a)){var b=a.inspect();if("fulfilled"===b.state)return b.value}return a}function s(a){return c(a)&&"function"==typeof a.promiseDispatch&&"function"==typeof a.inspect}function t(a){return c(a)&&"function"==typeof a.then}function u(a){return s(a)&&"pending"===a.inspect().state}function v(a){return!s(a)||"fulfilled"===a.inspect().state}function w(a){return s(a)&&"rejected"===a.inspect().state}function x(){eb.length=0,fb.length=0,gb||(gb=!0)}function y(a,b){gb&&(fb.push(a),eb.push(b&&"undefined"!=typeof b.stack?b.stack:"(no stack) "+b))}function z(a){if(gb){var b=Z(fb,a);-1!==b&&(fb.splice(b,1),eb.splice(b,1))}}function A(a){var b=p({when:function(b){return b&&z(this),b?b(a):this}},function(){return this},function(){return{state:"rejected",reason:a}});return y(b,a),b}function B(a){return p({when:function(){return a},get:function(b){return a[b]},set:function(b,c){a[b]=c},"delete":function(b){delete a[b]},post:function(b,c){return null===b||void 0===b?a.apply(void 0,c):a[b].apply(a,c)},apply:function(b,c){return a.apply(b,c)},keys:function(){return bb(a)}},void 0,function(){return{state:"fulfilled",value:a}})}function C(a){var b=m();return V(function(){try{a.then(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}}),b.promise}function D(a){return p({isDef:function(){}},function(b,c){return J(a,b,c)},function(){return l(a).inspect()})}function E(a,b,c){return l(a).spread(b,c)}function F(a){return function(){function b(a,b){var g;if("undefined"==typeof StopIteration){try{g=c[a](b)}catch(h){return A(h)}return g.done?g.value:q(g.value,e,f)}try{g=c[a](b)}catch(h){return d(h)?h.value:A(h)}return q(g,e,f)}var c=a.apply(this,arguments),e=b.bind(b,"next"),f=b.bind(b,"throw");return e()}}function G(a){l.done(l.async(a)())}function H(a){throw new S(a)}function I(a){return function(){return E([this,K(arguments)],function(b,c){return a.apply(b,c)})}}function J(a,b,c){return l(a).dispatch(b,c)}function K(a){return q(a,function(a){var b=0,c=m();return Y(a,function(d,e,f){var g;s(e)&&"fulfilled"===(g=e.inspect()).state?a[f]=g.value:(++b,q(e,function(d){a[f]=d,0===--b&&c.resolve(a)},c.reject,function(a){c.notify({index:f,value:a})}))},void 0),0===b&&c.resolve(a),c.promise})}function L(a){return q(a,function(a){return a=$(a,l),q(K($(a,function(a){return q(a,U,U)})),function(){return a})})}function M(a){return l(a).allSettled()}function N(a,b){return l(a).then(void 0,void 0,b)}function O(a,b){return l(a).nodeify(b)}var P=!1;try{throw new Error}catch(Q){P=!!Q.stack}var R,S,T=j(),U=function(){},V=function(){function a(){for(;c.next;){c=c.next;var b=c.task;c.task=void 0;var d=c.domain;d&&(c.domain=void 0,d.enter());try{b()}catch(f){if(g)throw d&&d.exit(),setTimeout(a,0),d&&d.enter(),f;setTimeout(function(){throw f},0)}d&&d.exit()}e=!1}var c={task:void 0,next:null},d=c,e=!1,f=void 0,g=!1;if(V=function(a){d=d.next={task:a,domain:g&&b.domain,next:null},e||(e=!0,f())},"undefined"!=typeof b&&b.nextTick)g=!0,f=function(){b.nextTick(a)};else if("function"==typeof setImmediate)f="undefined"!=typeof window?setImmediate.bind(window,a):function(){setImmediate(a)};else if("undefined"!=typeof MessageChannel){var h=new MessageChannel;h.port1.onmessage=function(){f=i,h.port1.onmessage=a,a()};var i=function(){h.port2.postMessage(0)};f=function(){setTimeout(a,0),i()}}else f=function(){setTimeout(a,0)};return V}(),W=Function.call,X=a(Array.prototype.slice),Y=a(Array.prototype.reduce||function(a,b){var c=0,d=this.length;if(1===arguments.length)for(;;){if(c in this){b=this[c++];break}if(++c>=d)throw new TypeError}for(;d>c;c++)c in this&&(b=a(b,this[c],c));return b}),Z=a(Array.prototype.indexOf||function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),$=a(Array.prototype.map||function(a,b){var c=this,d=[];return Y(c,function(e,f,g){d.push(a.call(b,f,g,c))},void 0),d}),_=Object.create||function(a){function b(){}return b.prototype=a,new b},ab=a(Object.prototype.hasOwnProperty),bb=Object.keys||function(a){var b=[];for(var c in a)ab(a,c)&&b.push(c);return b},cb=a(Object.prototype.toString);S="undefined"!=typeof ReturnValue?ReturnValue:function(a){this.value=a};var db="From previous event:";l.resolve=l,l.nextTick=V,l.longStackSupport=!1,l.defer=m,m.prototype.makeNodeResolver=function(){var a=this;return function(b,c){b?a.reject(b):a.resolve(arguments.length>2?X(arguments,1):c)}},l.Promise=n,l.promise=n,n.race=o,n.all=K,n.reject=A,n.resolve=l,l.passByCopy=function(a){return a},p.prototype.passByCopy=function(){return this},l.join=function(a,b){return l(a).join(b)},p.prototype.join=function(a){return l([this,a]).spread(function(a,b){if(a===b)return a;throw new Error("Can't join: not the same: "+a+" "+b)})},l.race=o,p.prototype.race=function(){return this.then(l.race)},l.makePromise=p,p.prototype.toString=function(){return"[object Promise]"},p.prototype.then=function(a,b,c){function d(b){try{return"function"==typeof a?a(b):b}catch(c){return A(c)}}function f(a){if("function"==typeof b){e(a,h);try{return b(a)}catch(c){return A(c)}}return A(a)}function g(a){return"function"==typeof c?c(a):a}var h=this,i=m(),j=!1;return V(function(){h.promiseDispatch(function(a){j||(j=!0,i.resolve(d(a)))},"when",[function(a){j||(j=!0,i.resolve(f(a)))}])}),h.promiseDispatch(void 0,"when",[void 0,function(a){var b,c=!1;try{b=g(a)}catch(d){if(c=!0,!l.onerror)throw d;l.onerror(d)}c||i.notify(b)}]),i.promise},l.when=q,p.prototype.thenResolve=function(a){return this.then(function(){return a})},l.thenResolve=function(a,b){return l(a).thenResolve(b)},p.prototype.thenReject=function(a){return this.then(function(){throw a})},l.thenReject=function(a,b){return l(a).thenReject(b)},l.nearer=r,l.isPromise=s,l.isPromiseAlike=t,l.isPending=u,p.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=v,p.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=w,p.prototype.isRejected=function(){return"rejected"===this.inspect().state};var eb=[],fb=[],gb=!0;l.resetUnhandledRejections=x,l.getUnhandledReasons=function(){return eb.slice()},l.stopUnhandledRejectionTracking=function(){x(),gb=!1},x(),l.reject=A,l.fulfill=B,l.master=D,l.spread=E,p.prototype.spread=function(a,b){return this.all().then(function(b){return a.apply(void 0,b)},b)},l.async=F,l.spawn=G,l["return"]=H,l.promised=I,l.dispatch=J,p.prototype.dispatch=function(a,b){var c=this,d=m();return V(function(){c.promiseDispatch(d.resolve,a,b)}),d.promise},l.get=function(a,b){return l(a).dispatch("get",[b])},p.prototype.get=function(a){return this.dispatch("get",[a])},l.set=function(a,b,c){return l(a).dispatch("set",[b,c])},p.prototype.set=function(a,b){return this.dispatch("set",[a,b])},l.del=l["delete"]=function(a,b){return l(a).dispatch("delete",[b])},p.prototype.del=p.prototype["delete"]=function(a){return this.dispatch("delete",[a])},l.mapply=l.post=function(a,b,c){return l(a).dispatch("post",[b,c])},p.prototype.mapply=p.prototype.post=function(a,b){return this.dispatch("post",[a,b])},l.send=l.mcall=l.invoke=function(a,b){return l(a).dispatch("post",[b,X(arguments,2)])},p.prototype.send=p.prototype.mcall=p.prototype.invoke=function(a){return this.dispatch("post",[a,X(arguments,1)])},l.fapply=function(a,b){return l(a).dispatch("apply",[void 0,b])},p.prototype.fapply=function(a){return this.dispatch("apply",[void 0,a])},l["try"]=l.fcall=function(a){return l(a).dispatch("apply",[void 0,X(arguments,1)])},p.prototype.fcall=function(){return this.dispatch("apply",[void 0,X(arguments)])},l.fbind=function(a){var b=l(a),c=X(arguments,1);return function(){return b.dispatch("apply",[this,c.concat(X(arguments))])}},p.prototype.fbind=function(){var a=this,b=X(arguments);return function(){return a.dispatch("apply",[this,b.concat(X(arguments))])}},l.keys=function(a){return l(a).dispatch("keys",[])},p.prototype.keys=function(){return this.dispatch("keys",[])},l.all=K,p.prototype.all=function(){return K(this)},l.allResolved=k(L,"allResolved","allSettled"),p.prototype.allResolved=function(){return L(this)},l.allSettled=M,p.prototype.allSettled=function(){return this.then(function(a){return K($(a,function(a){function b(){return a.inspect()}return a=l(a),a.then(b,b)}))})},l.fail=l["catch"]=function(a,b){return l(a).then(void 0,b)},p.prototype.fail=p.prototype["catch"]=function(a){return this.then(void 0,a)},l.progress=N,p.prototype.progress=function(a){return this.then(void 0,void 0,a)},l.fin=l["finally"]=function(a,b){return l(a)["finally"](b)},p.prototype.fin=p.prototype["finally"]=function(a){return a=l(a),this.then(function(b){return a.fcall().then(function(){return b})},function(b){return a.fcall().then(function(){throw b})})},l.done=function(a,b,c,d){return l(a).done(b,c,d)},p.prototype.done=function(a,c,d){var f=function(a){V(function(){if(e(a,g),!l.onerror)throw a;l.onerror(a)})},g=a||c||d?this.then(a,c,d):this;"object"==typeof b&&b&&b.domain&&(f=b.domain.bind(f)),g.then(void 0,f)},l.timeout=function(a,b,c){return l(a).timeout(b,c)},p.prototype.timeout=function(a,b){var c=m(),d=setTimeout(function(){c.reject(new Error(b||"Timed out after "+a+" ms"))},a);return this.then(function(a){clearTimeout(d),c.resolve(a)},function(a){clearTimeout(d),c.reject(a)},c.notify),c.promise},l.delay=function(a,b){return void 0===b&&(b=a,a=void 0),l(a).delay(b)},p.prototype.delay=function(a){return this.then(function(b){var c=m();return setTimeout(function(){c.resolve(b)},a),c.promise})},l.nfapply=function(a,b){return l(a).nfapply(b)},p.prototype.nfapply=function(a){var b=m(),c=X(a);return c.push(b.makeNodeResolver()),this.fapply(c).fail(b.reject),b.promise},l.nfcall=function(a){var b=X(arguments,1);return l(a).nfapply(b)},p.prototype.nfcall=function(){var a=X(arguments),b=m();return a.push(b.makeNodeResolver()),this.fapply(a).fail(b.reject),b.promise},l.nfbind=l.denodeify=function(a){var b=X(arguments,1);return function(){var c=b.concat(X(arguments)),d=m();return c.push(d.makeNodeResolver()),l(a).fapply(c).fail(d.reject),d.promise}},p.prototype.nfbind=p.prototype.denodeify=function(){var a=X(arguments);return a.unshift(this),l.denodeify.apply(void 0,a)},l.nbind=function(a,b){var c=X(arguments,2);return function(){function d(){return a.apply(b,arguments)}var e=c.concat(X(arguments)),f=m();return e.push(f.makeNodeResolver()),l(d).fapply(e).fail(f.reject),f.promise}},p.prototype.nbind=function(){var a=X(arguments,0);return a.unshift(this),l.nbind.apply(void 0,a)},l.nmapply=l.npost=function(a,b,c){return l(a).npost(b,c)},p.prototype.nmapply=p.prototype.npost=function(a,b){var c=X(b||[]),d=m();return c.push(d.makeNodeResolver()),this.dispatch("post",[a,c]).fail(d.reject),d.promise},l.nsend=l.nmcall=l.ninvoke=function(a,b){var c=X(arguments,2),d=m();return c.push(d.makeNodeResolver()),l(a).dispatch("post",[b,c]).fail(d.reject),d.promise},p.prototype.nsend=p.prototype.nmcall=p.prototype.ninvoke=function(a){var b=X(arguments,1),c=m();return b.push(c.makeNodeResolver()),this.dispatch("post",[a,b]).fail(c.reject),c.promise},l.nodeify=O,p.prototype.nodeify=function(a){return a?void this.then(function(b){V(function(){a(null,b)})},function(b){V(function(){a(b)})}):this};var hb=j();return l})}).call(this,b("JkpR2F"))},{JkpR2F:23}],34:[function(a,b){for(var c=a("performance-now"),d="undefined"==typeof window?{}:window,e=["moz","webkit"],f="AnimationFrame",g=d["request"+f],h=d["cancel"+f]||d["cancelRequest"+f],i=0;i<e.length&&!g;i++)g=d[e[i]+"Request"+f],h=d[e[i]+"Cancel"+f]||d[e[i]+"CancelRequest"+f];if(!g||!h){var j=0,k=0,l=[],m=1e3/60;g=function(a){if(0===l.length){var b=c(),d=Math.max(0,m-(b-j));j=d+b,setTimeout(function(){var a=l.slice(0);l.length=0;for(var b=0;b<a.length;b++)a[b].cancelled||a[b].callback(j)},d)}return l.push({handle:++k,callback:a,cancelled:!1}),k},h=function(a){for(var b=0;b<l.length;b++)l[b].handle===a&&(l[b].cancelled=!0)}}b.exports=function(){return g.apply(d,arguments)},b.exports.cancel=function(){h.apply(d,arguments)}},{"performance-now":32}],35:[function(a,b){function c(a){for(var b=1;b<arguments.length;++b){var c=arguments[b];for(var d in c)void 0!==c[d]&&(a[d]=c[d])}return a}function d(a){return a}function e(a){this.message=a,this.stack=(new Error).stack}function f(a){function b(){m&&(m.reject(new e("WebGL Context Lost")),m=null)}function f(b,f){function g(b,c,d){var e=j(),f=0,g=!(d.from instanceof window.HTMLImageElement),k=!(d.to instanceof window.HTMLImageElement),l=h.defer();return m=l,function n(){if(m===l){++f;var h=j(),o=(h-e)/b;try{1>o?(i(n,a),g&&p.setUniform("from",d.from),k&&p.setUniform("to",d.to),p.setProgress(c(o)),p.draw()):(g&&p.setUniform("from",d.from),k&&p.setUniform("to",d.to),p.setProgress(c(1)),p.draw(),l.resolve({startAt:e,endAt:h,elapsedTime:h-e,frames:f}),m=null)}catch(q){l.reject(q),m=null}}}(),l.promise}function o(a,b,e){if(e||(e=d),arguments.length<2||arguments.length>3||"object"!=typeof a||"number"!=typeof b||0>=b||"function"!=typeof e)throw new Error("Bad arguments. usage: t(uniforms, duration, easing) -- uniforms is an Object, duration an integer > 0, easing an optional function.");var i=c({},f,a);i[k]=e(0);var j;for(j in q)if(j!==l&&!(j in i))throw new Error("uniform '"+j+"': You must provide an initial value.");for(j in a){if(j===l)throw new Error("The '"+j+"' uniform is reserved, you must not use it.");if(!(j in q))throw new Error("uniform '"+j+"': This uniform does not exist in your GLSL code.")}if(!n.getGL())return h.reject(new Error("WebGL context is null."));if(m)return h.reject(new Error("another transition is already running."));try{p.load()}catch(o){return h.reject(o)}p.bind();for(j in i)p.setUniform(j,i[j]);return p.syncViewport(),g(b,e,i)}var p=n.apply(this,arguments),q=p.getUniforms();if(f||(f={}),arguments.length<1||arguments.length>2||"string"!=typeof b)throw new Error("Bad arguments. usage: T(glsl [, options])");for(var r in f){if(r===l)throw new Error("The '"+r+"' uniform is reserved, you must not use it.");if(!(r in q))throw new Error("uniform '"+r+"': This uniform does not exist in your GLSL code.")}return m||p.load(),o.destroy=function(){p.isCurrentTransition()&&m&&(m.reject(new e("Transition destroyed.")),m=null),p.destroy()},o.core=p,o}var m,n=g.apply(this,arguments);return n.onContextLost(b),f.core=n,f.abort=function(){m&&(m.reject(new e("Transition aborted by user.")),m=null)},f}var g=a("glsl-transition-core"),h=a("q"),i=a("raf"),j=a("performance-now"),k="progress",l="resolution";e.prototype=new Error,e.prototype.name="TransitionAbortedError",f.TransitionAbortedError=e,f.defaults=g.defaults,f.isSupported=g.isSupported,b.exports=f},{"glsl-transition-core":17,"performance-now":32,q:33,raf:34}]},{},[35])(35)});